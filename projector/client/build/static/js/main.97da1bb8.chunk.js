(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{38:function(t,e,n){},39:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var s=n(1),a=n.n(s),r=n(30),c=n.n(r),i=(n(38),n(15)),o=n(8),l=n(9),h=n(11),u=n(10),j=(n(39),n(2)),d=n(33),p=n(4),b=n.n(p),O=n(12),g=n(0);function m(t){return Object(g.jsxs)("div",{children:[t.projects.length>0&&Object(g.jsx)("h2",{children:"Projects: "}),t.projects.map((function(t){return Object(g.jsx)("div",{children:Object(g.jsx)("h3",{children:Object(g.jsx)(O.b,{to:"/projects/".concat(t._id),children:t.title})})},t._id)}))]})}var f=n(14),x=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={title:"",description:"",error:null},t.handleChange=function(e){var n=e.target.name,s=e.target.value;s.length<8?t.setState({error:"String is not long enough"}):t.setState(Object(f.a)({},n,s))},t.handleSubmit=function(e){e.preventDefault(),b.a.post("/api/projects",{title:t.state.title,description:t.state.description}).then((function(e){console.log(e),t.setState({title:"",description:""}),t.props.getData()}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("label",{htmlFor:"title",children:"Title: "}),Object(g.jsx)("input",{type:"text",id:"title",name:"title",value:this.state.title,onChange:this.handleChange}),Object(g.jsx)("label",{htmlFor:"description",children:"Description: "}),Object(g.jsx)("input",{type:"text",id:"description",name:"description",value:this.state.description,onChange:this.handleChange}),Object(g.jsx)("button",{type:"submit",children:"Create this project"})]})}}]),n}(s.Component);function v(){var t=Object(s.useState)([]),e=Object(d.a)(t,2),n=e[0],a=e[1];Object(s.useEffect)((function(){r()}));var r=function(){b.a.get("/api/projects").then((function(t){console.log(t),a(t.data)})).catch((function(t){console.log(t)}))};return Object(g.jsxs)("div",{children:[Object(g.jsx)(x,{getData:r}),Object(g.jsx)(m,{projects:n})]})}var C=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Edit Project"}),Object(g.jsxs)("form",{onSubmit:this.props.handleSubmit,children:[Object(g.jsx)("label",{htmlFor:"title",children:"Title: "}),Object(g.jsx)("input",{type:"text",id:"title",name:"title",value:this.props.title,onChange:this.props.handleChange}),Object(g.jsx)("label",{htmlFor:"title",children:"Description: "}),Object(g.jsx)("input",{type:"text",id:"description",name:"description",value:this.props.description,onChange:this.props.handleChange}),Object(g.jsx)("button",{type:"submit",children:"Update this project"})]})]})}}]),n}(s.Component),y=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={project:null,error:null,editForm:!1,title:"",description:""},t.getData=function(){b.a.get("/api/projects/".concat(t.props.match.params.id)).then((function(e){console.log(e),t.setState({project:e.data,title:e.data.title,description:e.data.description})})).catch((function(e){console.log(e.response),404===e.response.status&&t.setState({error:"Not found \ud83e\udd37\u200d\u2640\ufe0f\ud83e\udd37\u200d\u2642\ufe0f"})}))},t.deleteProject=function(){var e=t.state.project._id;b.a.delete("/api/projects/".concat(e)).then((function(){t.props.history.push("/projects")})).catch((function(t){console.log(t)}))},t.toggleEditForm=function(){t.setState((function(t){return{editForm:!t.editForm}}))},t.handleChange=function(e){var n=e.target,s=n.name,a=n.value;t.setState(Object(f.a)({},s,a))},t.handleSubmit=function(e){e.preventDefault(),console.log("update"),console.log(t.state.title,t.state.description),b.a.put("/api/projects/".concat(t.state.project._id),{title:t.state.title,description:t.state.description}).then((function(e){t.setState({project:e.data,title:e.data.title,description:e.data.description,editForm:!1})})).catch((function(t){console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return this.state.error?Object(g.jsx)("h3",{children:this.state.error}):this.state.project?Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:this.state.project.title}),Object(g.jsx)("p",{children:this.state.project.description}),Object(g.jsx)("button",{onClick:this.deleteProject,children:"Delete this project \u274c"}),Object(g.jsx)("button",{onClick:this.toggleEditForm,children:"Show Edit Form \ud83d\udcca"}),this.state.editForm&&Object(g.jsx)(C,Object(i.a)({handleChange:this.handleChange,handleSubmit:this.handleSubmit},this.state))]}):Object(g.jsx)(g.Fragment,{})}}]),n}(s.Component),S=function(t,e){return b.a.post("/api/auth/signup",{username:t,password:e}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},w=function(t,e){return b.a.post("/api/auth/login",{username:t,password:e}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},F=function(t){b.a.delete("/api/auth/logout").then((function(t){return t.data})).catch((function(t){return t.response.data})).then((function(){t.setUser(null)}))};function U(t){return console.log(t.user),Object(g.jsx)("div",{children:Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:Object(g.jsx)(O.b,{to:"/",children:"Home"})}),t.user?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("li",{children:Object(g.jsx)(O.b,{to:"/projects",children:"Projects"})}),Object(g.jsx)("li",{children:Object(g.jsx)(O.b,{to:"/",onClick:function(){return F(t)},children:"Logout"})})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("li",{children:Object(g.jsx)(O.b,{to:"/signup",children:"Signup"})}),Object(g.jsx)("li",{children:Object(g.jsx)(O.b,{to:"/login",children:"Login"})})]})]})})}var D=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={username:"",password:"",message:""},t.handleChange=function(e){var n=e.target,s=n.name,a=n.value;t.setState(Object(f.a)({},s,a))},t.handleSubmit=function(e){e.preventDefault();var n=t.state,s=n.username,a=n.password;S(s,a).then((function(e){e.message?t.setState({message:e.message,username:"",password:""}):(console.log(e),t.props.setUser(e),t.props.history.push("/projects"))}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Signup"}),Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(g.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"}),Object(g.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(g.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"}),Object(g.jsx)("button",{type:"submit",children:"Sign Up"}),this.state.message&&Object(g.jsx)("h3",{children:this.state.message})]})]})}}]),n}(s.Component),k=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={username:"",password:"",message:""},t.handleChange=function(e){var n=e.target,s=n.name,a=n.value;t.setState(Object(f.a)({},s,a))},t.handleSubmit=function(e){e.preventDefault();var n=t.state,s=n.username,a=n.password;w(s,a).then((function(e){e.message?t.setState({message:e.message,username:"",password:""}):(console.log(e),t.props.setUser(e),t.props.history.push("/projects"))}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Login"}),Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(g.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"}),Object(g.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(g.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"}),Object(g.jsx)("button",{type:"submit",children:"Log in"}),this.state.message&&Object(g.jsx)("h3",{children:this.state.message})]})]})}}]),n}(s.Component),P=(n(32),function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={user:t.props.user},t.setUser=function(e){t.setState({user:e})},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(U,{user:this.state.user,setUser:this.setUser}),Object(g.jsx)(j.b,{exact:!0,path:"/projects",render:function(e){return t.state.user?Object(g.jsx)(v,Object(i.a)({},e)):Object(g.jsx)(j.a,{to:"/login"})}}),Object(g.jsx)(j.b,{exact:!0,path:"/projects/:id",component:y}),Object(g.jsx)(j.b,{exact:!0,path:"/signup",render:function(e){return Object(g.jsx)(D,Object(i.a)({setUser:t.setUser},e))}}),Object(g.jsx)(j.b,{exact:!0,path:"/login",render:function(e){return Object(g.jsx)(k,Object(i.a)({setUser:t.setUser},e))}})]})}}]),n}(a.a.Component)),A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),s(t),a(t),r(t),c(t)}))};b.a.get("/api/auth/loggedin").then((function(t){var e=t.data;c.a.render(Object(g.jsx)(O.a,{children:Object(g.jsx)(P,{user:e})}),document.getElementById("root"))})).catch((function(t){console.log(t)})),A()}},[[67,1,2]]]);
//# sourceMappingURL=main.97da1bb8.chunk.js.map